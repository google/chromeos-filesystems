<!--
Copyright 2014 The Chromium Authors. All rights reserved.

Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file or at
https://developers.google.com/open-source/licenses/bsd
-->

<link rel="import" href="../../../third_party/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../third_party/paper-button/paper-button.html">

<polymer-element name="confirm-unmount-dialog" on-open="{{open}}">
  <template>
    <paper-dialog heading="Confirm unmount" id="dialog">
      <p>Are you sure you want to unmount this bucket?</p>
      <paper-button id="no" label="No" affirmative></paper-button>
      <paper-button id="yes" on-click="{{onYesClicked}}" label="Yes" affirmative autofocus></paper-button>
    </paper-dialog>
  </template>

  <script>
    /**
     * Component used to prompt the user for confirmation when they click the
     * button to unmount a bucket.
     */
    Polymer('confirm-unmount-dialog', {
      /**
       * Opens the dialog box.
       */
      open: function(data) {
        console.log(data.detail);

        // Store a reference to the list item that initiated the request, so a
        // message can later be sent back to that list item telling it to unmount
        // its bucket if the user clicks on 'yes'.
        this.caller = data.detail.caller;

        // Using .toggle() because the dialog is guaranteed to be closed when this
        // is called, and setting .opened = true doesn't work.
        this.$.dialog.toggle();
      },

      /**
       * Responds to the user cancelling the request to unmount the bucket.
       */
      onNoClicked: function() {
        console.log('no');
      },

      /**
       * Responds to the user confirming the request to unmount the bucket.
       */
      onYesClicked: function() {
        console.log('yes');
        this.caller.fire('delete-confirmed');
      }
    });
  </script>
</polymer-element>
